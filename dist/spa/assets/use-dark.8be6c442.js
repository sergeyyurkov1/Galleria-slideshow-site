import{c as b,h as _,Q as j}from"./dom.3452ea71.js";import{c as u,h as o,e as C,f as D,j as F,g as P,S as R,r as g,w as H,a as I,T as L}from"./index.68b44011.js";var U=b({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:i}){const{proxy:{$q:l}}=P(),n=C(D);C(F,()=>{console.error("QPage needs to be child of QPageContainer")});const h=u(()=>{const a=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof e.styleFn=="function"){const s=n.isContainer.value===!0?n.containerHeight.value:l.screen.height;return e.styleFn(a,s)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-a+"px":l.screen.height===0?a!==0?`calc(100vh - ${a}px)`:"100vh":l.screen.height-a+"px"}}),r=u(()=>`q-page ${e.padding===!0?" q-layout-padding":""}`);return()=>o("main",{class:r.value,style:h.value},_(i.default))}});const W=R("data",{state:()=>({nextLink:"https://api.artsy.net/api/artworks?total_count=1",data:[],token:"",n:1}),getters:{splitData(e){const i=[...e.data];let l=[];for(let n=e.n;n>0;n--)l.push(i.splice(0,Math.ceil(i.length/n)));return l}},actions:{setToken(e){this.token=e},putData(e){this.data.push(...e)},setNextLink(e){this.nextLink=e},setN(e){this.n=e}}}),M={ratio:[String,Number]};function E(e,i){return u(()=>{const l=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const K=16/9;var p=b({name:"QImg",props:{...M,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:K},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:l}){const n=g(e.initialRatio),h=E(e,n);let r;const a=[g(null),g(e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null)],s=g(0),d=g(!1),f=g(!1),q=u(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),w=u(()=>({width:e.width,height:e.height})),T=u(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),z=u(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));H(()=>m(),y);function m(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function y(t){if(clearTimeout(r),f.value=!1,t===null){d.value=!1,a[0].value=null,a[1].value=null;return}d.value=!0,a[s.value].value=t}function N({target:t}){r!==null&&(clearTimeout(r),n.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,S(t,1))}function S(t,c){r===null||c===1e3||(t.complete===!0?Q(t):r=setTimeout(()=>{S(t,c+1)},50))}function Q(t){r!==null&&(s.value=s.value===1?0:1,a[s.value].value=null,d.value=!1,f.value=!1,l("load",t.currentSrc||t.src))}function B(t){clearTimeout(r),d.value=!1,f.value=!0,a[0].value=null,a[1].value=null,l("error",t)}function $(t,c){return o("div",{class:"q-img__container absolute-full",key:t},c)}function k(t){const c=a[t].value,v={key:"img_"+t,class:T.value,style:z.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...c};return s.value===t?(v.class+=" q-img__image--waiting",Object.assign(v,{onLoad:N,onError:B})):v.class+=" q-img__image--loaded",$("img"+t,o("img",v))}function x(){return d.value!==!0?o("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},_(i[f.value===!0?"error":"default"])):o("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[o(j,{color:e.spinnerColor,size:e.spinnerSize})])}return y(m()),I(()=>{clearTimeout(r),r=null}),()=>{const t=[];return h.value!==null&&t.push(o("div",{key:"filler",style:h.value})),f.value!==!0&&(a[0].value!==null&&t.push(k(0)),a[1].value!==null&&t.push(k(1))),t.push(o(L,{name:"q-transition--fade"},x)),o("div",{class:q.value,style:w.value,role:"img","aria-label":e.alt},t)}}});const G={dark:{type:Boolean,default:null}};function J(e,i){return u(()=>e.dark===null?i.dark.isActive:e.dark)}export{p as Q,J as a,W as b,U as c,G as u};
